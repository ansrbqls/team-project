{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/cursor/team%20project/campus-cafe/src/app/admin/sales-report/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useStore } from '@/store/useStore'\r\nimport { useState } from 'react'\r\nimport Link from 'next/link'\r\n\r\nexport default function SalesReportPage() {\r\n    const { orders } = useStore()\r\n    const [selectedDate, setSelectedDate] = useState(new Date())\r\n\r\n    // Get the start of the week (Monday)\r\n    const getWeekStart = (date: Date) => {\r\n        const day = date.getDay()\r\n        const diff = date.getDate() - day + (day === 0 ? -6 : 1)\r\n        return new Date(date.setDate(diff))\r\n    }\r\n\r\n    // Get all days of the week\r\n    const getWeekDays = (startDate: Date) => {\r\n        const days = []\r\n        for (let i = 0; i < 7; i++) {\r\n            const date = new Date(startDate)\r\n            date.setDate(date.getDate() + i)\r\n            days.push(date)\r\n        }\r\n        return days\r\n    }\r\n\r\n    const weekStart = getWeekStart(selectedDate)\r\n    const weekDays = getWeekDays(weekStart)\r\n\r\n    // Get sales for a specific date\r\n    const getSalesForDate = (date: Date) => {\r\n        return orders.filter(\r\n            (order) =>\r\n                new Date(order.createdAt).toDateString() === date.toDateString()\r\n        )\r\n    }\r\n\r\n    // Calculate total sales for a date\r\n    const getTotalSalesForDate = (date: Date) => {\r\n        return getSalesForDate(date).reduce((sum, order) => sum + order.total, 0)\r\n    }\r\n\r\n    // Calculate total sales for the week\r\n    const getTotalSalesForWeek = () => {\r\n        return weekDays.reduce((sum, date) => sum + getTotalSalesForDate(date), 0)\r\n    }\r\n\r\n    // Get sales by item for a date\r\n    const getSalesByItemForDate = (date: Date) => {\r\n        const sales = getSalesForDate(date)\r\n        const itemSales = new Map()\r\n\r\n        sales.forEach((order) => {\r\n            order.items.forEach((item) => {\r\n                const key = item.item.id\r\n                const current = itemSales.get(key) || {\r\n                    name: item.item.name,\r\n                    quantity: 0,\r\n                    total: 0,\r\n                }\r\n                itemSales.set(key, {\r\n                    name: item.item.name,\r\n                    quantity: current.quantity + item.quantity,\r\n                    total: current.total + item.item.price * item.quantity,\r\n                })\r\n            })\r\n        })\r\n\r\n        return Array.from(itemSales.values())\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-white\">\r\n            <div className=\"mx-auto max-w-7xl px-4 py-16 sm:px-6 sm:py-24 lg:px-8\">\r\n                <div className=\"sm:flex sm:items-center\">\r\n                    <div className=\"sm:flex-auto\">\r\n                        <h1 className=\"text-2xl font-bold tracking-tight text-gray-900\">\r\n                            주간 판매 보고서\r\n                        </h1>\r\n                    </div>\r\n                    <div className=\"mt-4 sm:ml-16 sm:mt-0 sm:flex-none\">\r\n                        <Link\r\n                            href=\"/admin\"\r\n                            className=\"block rounded-md bg-indigo-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\r\n                        >\r\n                            대시보드로 돌아가기\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"mt-8\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <button\r\n                            onClick={() => {\r\n                                const newDate = new Date(selectedDate)\r\n                                newDate.setDate(newDate.getDate() - 7)\r\n                                setSelectedDate(newDate)\r\n                            }}\r\n                            className=\"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\"\r\n                        >\r\n                            이전 주\r\n                        </button>\r\n                        <h2 className=\"text-lg font-medium text-gray-900\">\r\n                            {weekStart.toLocaleDateString()} ~{' '}\r\n                            {new Date(weekStart.getTime() + 6 * 24 * 60 * 60 * 1000).toLocaleDateString()}\r\n                        </h2>\r\n                        <button\r\n                            onClick={() => {\r\n                                const newDate = new Date(selectedDate)\r\n                                newDate.setDate(newDate.getDate() + 7)\r\n                                setSelectedDate(newDate)\r\n                            }}\r\n                            className=\"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\"\r\n                        >\r\n                            다음 주\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"mt-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-7\">\r\n                        {weekDays.map((date) => (\r\n                            <button\r\n                                key={date.toISOString()}\r\n                                onClick={() => setSelectedDate(date)}\r\n                                className={`rounded-lg border p-4 text-center ${date.toDateString() === selectedDate.toDateString()\r\n                                        ? 'border-indigo-500 bg-indigo-50'\r\n                                        : 'border-gray-200'\r\n                                    }`}\r\n                            >\r\n                                <div className=\"text-sm font-medium text-gray-900\">\r\n                                    {date.toLocaleDateString('ko-KR', { weekday: 'short' })}\r\n                                </div>\r\n                                <div className=\"mt-2 text-2xl font-bold text-indigo-600\">\r\n                                    {getTotalSalesForDate(date).toLocaleString()}원\r\n                                </div>\r\n                                <div className=\"mt-1 text-sm text-gray-500\">\r\n                                    {getSalesForDate(date).length}건\r\n                                </div>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <div className=\"mt-8\">\r\n                        <h3 className=\"text-lg font-medium text-gray-900\">\r\n                            {selectedDate.toLocaleDateString()} 판매 내역\r\n                        </h3>\r\n                        <div className=\"mt-4 flow-root\">\r\n                            <div className=\"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\">\r\n                                <div className=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\">\r\n                                    <table className=\"min-w-full divide-y divide-gray-300\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th\r\n                                                    scope=\"col\"\r\n                                                    className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0\"\r\n                                                >\r\n                                                    메뉴\r\n                                                </th>\r\n                                                <th\r\n                                                    scope=\"col\"\r\n                                                    className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\"\r\n                                                >\r\n                                                    판매 수량\r\n                                                </th>\r\n                                                <th\r\n                                                    scope=\"col\"\r\n                                                    className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\"\r\n                                                >\r\n                                                    판매 금액\r\n                                                </th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody className=\"divide-y divide-gray-200\">\r\n                                            {getSalesByItemForDate(selectedDate).map((item) => (\r\n                                                <tr key={item.name}>\r\n                                                    <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-0\">\r\n                                                        {item.name}\r\n                                                    </td>\r\n                                                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\r\n                                                        {item.quantity}개\r\n                                                    </td>\r\n                                                    <td className=\"whitespace-nowrap px-3 py-4 text-sm text-gray-500\">\r\n                                                        {item.total.toLocaleString()}원\r\n                                                    </td>\r\n                                                </tr>\r\n                                            ))}\r\n                                        </tbody>\r\n                                        <tfoot>\r\n                                            <tr>\r\n                                                <th\r\n                                                    scope=\"row\"\r\n                                                    colSpan={2}\r\n                                                    className=\"py-4 pl-4 pr-3 text-right text-sm font-semibold text-gray-900 sm:pl-0\"\r\n                                                >\r\n                                                    주간 총 매출\r\n                                                </th>\r\n                                                <td className=\"whitespace-nowrap px-3 py-4 text-sm font-semibold text-gray-900\">\r\n                                                    {getTotalSalesForWeek().toLocaleString()}원\r\n                                                </td>\r\n                                            </tr>\r\n                                        </tfoot>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}