{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/cursor/team%20project/campus-cafe/src/app/cart/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useStore } from '@/store/useStore'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useState } from 'react'\r\n\r\nexport default function CartPage() {\r\n    const { cart, removeFromCart, updateQuantity, placeOrder, makeReservation, currentUser } = useStore()\r\n    const [notification, setNotification] = useState('')\r\n    const [showReservationModal, setShowReservationModal] = useState(false)\r\n    const [pickupTime, setPickupTime] = useState('')\r\n    const router = useRouter()\r\n\r\n    const total = cart.reduce(\r\n        (sum, item) => {\r\n            if (!item || !item.item || typeof item.item.price !== 'number') {\r\n                console.error('Invalid cart item:', item);\r\n                return sum;\r\n            }\r\n            return sum + item.item.price * item.quantity;\r\n        },\r\n        0\r\n    )\r\n\r\n    const handleOrder = () => {\r\n        if (!currentUser) {\r\n            router.push('/login')\r\n            return\r\n        }\r\n\r\n        if (cart.length === 0) {\r\n            setNotification('장바구니가 비어있습니다.')\r\n            setTimeout(() => setNotification(''), 2000)\r\n            return\r\n        }\r\n\r\n        placeOrder()\r\n        setNotification('주문이 완료되었습니다.')\r\n        setTimeout(() => setNotification(''), 2000)\r\n    }\r\n\r\n    const handleReservation = () => {\r\n        if (!currentUser) {\r\n            router.push('/login')\r\n            return\r\n        }\r\n\r\n        if (cart.length === 0) {\r\n            setNotification('장바구니가 비어있습니다.')\r\n            setTimeout(() => setNotification(''), 2000)\r\n            return\r\n        }\r\n\r\n        if (!pickupTime) {\r\n            setNotification('픽업 시간을 선택해주세요.')\r\n            setTimeout(() => setNotification(''), 2000)\r\n            return\r\n        }\r\n\r\n        const [date, time] = pickupTime.split('T')\r\n        makeReservation(date, time, 1)\r\n        setShowReservationModal(false)\r\n        setNotification('예약이 완료되었습니다.')\r\n        setTimeout(() => setNotification(''), 2000)\r\n    }\r\n\r\n    // 시간 옵션 생성 함수 수정\r\n    const generateTimeOptions = () => {\r\n        const options = []\r\n        const now = new Date()\r\n        const currentHour = now.getHours()\r\n        const currentMinute = now.getMinutes()\r\n\r\n        // 오늘 날짜의 8시부터 18시까지 20분 단위로 시간 생성\r\n        for (let hour = 8; hour <= 18; hour++) {\r\n            for (let minute = 0; minute < 60; minute += 20) {\r\n                const time = new Date(now)\r\n                time.setHours(hour, minute, 0, 0)\r\n\r\n                // 현재 시간보다 이전 시간은 제외\r\n                if (time.getHours() < currentHour ||\r\n                    (time.getHours() === currentHour && time.getMinutes() <= currentMinute)) {\r\n                    continue\r\n                }\r\n\r\n                // 시간을 HH:mm 형식으로 변환\r\n                const timeString = time.toLocaleTimeString('ko-KR', {\r\n                    hour: '2-digit',\r\n                    minute: '2-digit',\r\n                    hour12: true\r\n                })\r\n                options.push({\r\n                    value: time.toISOString(),\r\n                    label: timeString\r\n                })\r\n            }\r\n        }\r\n        return options\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n            <h1 className=\"text-2xl font-bold mb-8\">장바구니</h1>\r\n\r\n            {notification && (\r\n                <div className=\"fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg\">\r\n                    {notification}\r\n                </div>\r\n            )}\r\n\r\n            {cart.length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                    <p className=\"text-gray-500\">장바구니가 비어있습니다.</p>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    <div className=\"space-y-4\">\r\n                        {cart.map(({ item, quantity }) => {\r\n                            if (!item || !item.id) {\r\n                                console.error('Invalid cart item:', item);\r\n                                return null;\r\n                            }\r\n                            return (\r\n                                <div\r\n                                    key={item.id}\r\n                                    className=\"flex items-center justify-between p-4 bg-white rounded-lg shadow\"\r\n                                >\r\n                                    <div>\r\n                                        <h3 className=\"font-semibold\">{item.name}</h3>\r\n                                        <p className=\"text-gray-600\">{item.price}원</p>\r\n                                    </div>\r\n                                    <div className=\"flex items-center space-x-4\">\r\n                                        <div className=\"flex items-center space-x-2\">\r\n                                            <button\r\n                                                onClick={() =>\r\n                                                    updateQuantity(\r\n                                                        item.id,\r\n                                                        Math.max(0, quantity - 1)\r\n                                                    )\r\n                                                }\r\n                                                className=\"px-2 py-1 bg-gray-200 rounded\"\r\n                                            >\r\n                                                -\r\n                                            </button>\r\n                                            <span>{quantity}</span>\r\n                                            <button\r\n                                                onClick={() =>\r\n                                                    updateQuantity(\r\n                                                        item.id,\r\n                                                        Math.min(10, quantity + 1)\r\n                                                    )\r\n                                                }\r\n                                                className=\"px-2 py-1 bg-gray-200 rounded\"\r\n                                            >\r\n                                                +\r\n                                            </button>\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={() => removeFromCart(item.id)}\r\n                                            className=\"text-red-500 hover:text-red-700\"\r\n                                        >\r\n                                            삭제\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n\r\n                    <div className=\"mt-8 space-y-4\">\r\n                        <div className=\"flex justify-between items-center mb-4\">\r\n                            <span className=\"font-semibold\">총 금액:</span>\r\n                            <span className=\"text-xl font-bold\">\r\n                                {total.toLocaleString()}원\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"flex space-x-4\">\r\n                            <button\r\n                                onClick={handleOrder}\r\n                                className=\"flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition-colors\"\r\n                            >\r\n                                주문하기\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setShowReservationModal(true)}\r\n                                className=\"flex-1 bg-green-600 text-white py-2 rounded hover:bg-green-700 transition-colors\"\r\n                            >\r\n                                예약하기\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )}\r\n\r\n            {/* 예약 모달 */}\r\n            {showReservationModal && (\r\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n                    <div className=\"bg-white rounded-lg p-6 max-w-sm w-full mx-4\">\r\n                        <h3 className=\"text-lg font-semibold mb-4\">픽업 시간 선택</h3>\r\n                        <div className=\"mb-6\">\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                                픽업 시간\r\n                            </label>\r\n                            <select\r\n                                value={pickupTime}\r\n                                onChange={(e) => setPickupTime(e.target.value)}\r\n                                className=\"w-full p-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500\"\r\n                            >\r\n                                <option value=\"\">시간 선택</option>\r\n                                {generateTimeOptions().map(({ value, label }) => (\r\n                                    <option key={value} value={value}>\r\n                                        {label}\r\n                                    </option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"flex space-x-4\">\r\n                            <button\r\n                                onClick={() => setShowReservationModal(false)}\r\n                                className=\"flex-1 bg-gray-200 text-gray-700 py-2 rounded hover:bg-gray-300 transition-colors\"\r\n                            >\r\n                                취소\r\n                            </button>\r\n                            <button\r\n                                onClick={handleReservation}\r\n                                className=\"flex-1 bg-green-600 text-white py-2 rounded hover:bg-green-700 transition-colors\"\r\n                            >\r\n                                예약하기\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}